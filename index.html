<!doctype html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sistema de Seguridad - Acceso Autom√°tico</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .seccion { display: none; }
        .activo { display: block; }
        .input-v { @apply w-full p-3 bg-slate-50 border-2 border-slate-100 rounded-xl mb-3 outline-none focus:border-purple-500 font-semibold; }
        /* El bloqueo ahora es visible por defecto para evitar parpadeos */
        #bloqueo-pantalla { background: #0f172a; z-index: 1000; position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body class="bg-slate-100 font-sans min-h-screen">

    <!-- PANTALLA DE BLOQUEO -->
    <div id="bloqueo-pantalla">
        <div class="bg-white p-8 rounded-[2.5rem] shadow-2xl w-80 text-center">
            <div class="text-4xl mb-4">üõ°Ô∏è</div>
            <h2 class="font-black text-xl mb-1 text-slate-800 uppercase">Seguridad</h2>
            <p class="text-[10px] text-slate-400 font-bold mb-6 uppercase tracking-widest">Ingrese Clave de Acceso</p>
            
            <input type="password" id="input-pass" placeholder="Clave" 
                class="w-full p-4 bg-slate-100 rounded-2xl text-center text-xl font-black outline-none border-2 border-transparent focus:border-purple-500 mb-4 uppercase">
            
            <button onclick="verificarAcceso()" 
                class="w-full bg-indigo-600 text-white py-4 rounded-2xl font-black active:scale-95 transition-all shadow-lg shadow-indigo-100">
                INGRESAR
            </button>
        </div>
    </div>

    <!-- NAVEGACI√ìN -->
    <nav id="nav-principal" class="hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 flex justify-around p-3 z-50 glass">
        <button onclick="navegar('inicio')" class="text-center group"><div class="text-xl">üè†</div><span class="text-[10px] font-bold text-slate-400 uppercase">Inicio</span></button>
        <button onclick="navegar('buscar')" class="text-center group"><div class="text-xl">üîç</div><span class="text-[10px] font-bold text-slate-400 uppercase">Buscar</span></button>
        <button onclick="navegar('bitacora')" class="text-center group"><div class="text-xl">üìã</div><span class="text-[10px] font-bold text-slate-400 uppercase">Bit√°cora</span></button>
    </nav>

    <!-- CONTENIDO PRINCIPAL -->
    <main id="app-content" class="hidden">
        <!-- SECCI√ìN INICIO -->
        <div id="sec-inicio" class="seccion activo p-8 text-center min-h-screen flex flex-col justify-center pb-24">
            <div class="mb-10">
                <h1 id="txt-nombre-fracc" class="text-3xl font-black text-slate-900 italic uppercase">---</h1>
                <p class="text-indigo-600 font-bold text-xs tracking-[0.3em] uppercase italic">Control de Accesos</p>
            </div>
            <div class="space-y-3">
                <button onclick="abrirForm('ACCESO 1')" class="w-full bg-indigo-600 text-white p-5 rounded-2xl font-black shadow-xl italic">ACCESO 1</button>
                <button onclick="abrirForm('ACCESO 2')" class="w-full bg-indigo-600 text-white p-5 rounded-2xl font-black shadow-xl italic">ACCESO 2</button>
                <button onclick="abrirForm('PEATONAL')" class="w-full bg-slate-800 text-white p-5 rounded-2xl font-black shadow-xl italic">PEATONAL</button>
            </div>
            <!-- BOT√ìN CERRAR SESI√ìN -->
            <button onclick="cerrarSesion()" class="mt-10 text-[10px] font-bold text-slate-400 uppercase underline tracking-tighter">
                Cerrar Sesi√≥n / Cambiar Clave
            </button>
        </div>

        <!-- SECCI√ìN FORMULARIO (Simplificada para el ejemplo) -->
        <div id="sec-form" class="seccion p-6 pb-24">
            <div class="flex justify-between items-center mb-4">
                <h3 id="form-lugar" class="font-black text-indigo-700 bg-indigo-50 px-3 py-1 rounded-lg text-xs italic"></h3>
                <button onclick="navegar('inicio')" class="text-[10px] font-black text-slate-400 uppercase">Volver</button>
            </div>
            <div class="bg-white p-5 rounded-[2rem] shadow-xl border border-white italic">
                <p class="text-center text-slate-500 font-bold py-10">Formulario de registro listo...</p>
            </div>
        </div>
    </main>

    <script>
        // --- CONFIGURACI√ìN Y MAPA DE CLAVES ---
        const CLAVES_FRACC = {
            "CUMBRES123": "VIA CUMBRES",
            "ADMIN": "ACCESO MAESTRO",
            "ALAMOS456": "LOS √ÅLAMOS"
        };

        let nombreActual = "";

        // 1. AUTO-LOGIN AL CARGAR
        window.onload = function() {
            const sesionGuardada = localStorage.getItem('sesion_activa_nombre');
            if (sesionGuardada) {
                entrarDirecto(sesionGuardada);
            } else {
                // Si no hay sesi√≥n, nos aseguramos que el bloqueo sea visible
                document.getElementById('bloqueo-pantalla').classList.remove('hidden');
            }
        };

        // 2. VERIFICACI√ìN DE CLAVE
        function verificarAcceso() {
            const input = document.getElementById('input-pass').value.trim().toUpperCase();
            
            if (CLAVES_FRACC[input]) {
                const nombre = CLAVES_FRACC[input];
                localStorage.setItem('sesion_activa_nombre', nombre); // Guardamos en memoria
                entrarDirecto(nombre);
            } else {
                alert("‚ùå Clave no reconocida");
                document.getElementById('input-pass').value = "";
            }
        }

        // 3. MOSTRAR INTERFAZ
        function entrarDirecto(nombre) {
            nombreActual = nombre;
            document.getElementById('txt-nombre-fracc').innerText = nombreActual;
            
            // Cambios de visibilidad
            document.getElementById('bloqueo-pantalla').classList.add('hidden');
            document.getElementById('app-content').classList.remove('hidden');
            document.getElementById('nav-principal').classList.remove('hidden');
        }

        // 4. CERRAR SESI√ìN
        function cerrarSesion() {
            if(confirm("¬øDeseas cerrar la sesi√≥n actual?")) {
                localStorage.removeItem('sesion_activa_nombre');
                location.reload(); // Reinicia la app al estado bloqueado
            }
        }

        // 5. NAVEGACI√ìN ENTRE SECCIONES
        function navegar(id) {
            document.querySelectorAll('.seccion').forEach(s => s.classList.remove('activo'));
            document.getElementById('sec-' + id).classList.add('activo');
        }

        function abrirForm(lugar) {
            document.getElementById('form-lugar').innerText = lugar;
            navegar('form');
        }

        // Permitir entrar con la tecla "Enter"
        document.getElementById('input-pass').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') verificarAcceso();
        });
    </script>
</body>
</html>
